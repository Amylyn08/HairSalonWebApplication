{% extends 'base.html'%}
{% block content_css %}
<link rel="stylesheet" href="{{url_for('users_bp.static', filename='css/admin_panel.css')}}">
<script src="{{url_for('users_bp.static', filename='js/admin_panel.js')}}"></script>
{% endblock content_css %}
{% block content_when_login %}
<p>Hey {{current_user.username}}</p>
<li>Profile</li>
<li><a href="{{url_for('users_bp.logout')}}">Logout</a></li>
<li><a>My reports</a></li>
<li><a href="{{url_for('appointment_bp.my_appointments', username=current_user.username)}}">My Appointments</a></li>
<li><a href="{{url_for('appointment_bp.create_appointment')}}">Create Appointment</a></li>
{% endblock content_when_login %}
{% block content_main_pannel %}
<h2>Admin Pannel SUPER</h2>
<div class="admin_pannel">
    <nav>
        <ul id="adminnav-menu">
            <li class="active">Clients</li>
            <li>Employees</li>
            <li>Appointments</li>
             <!-- will also have report inside  5  -->
        </ul>
    </nav>
    <div id="Client-list" class="content active">
        <h3>Client List</h3>
        <table class="admin-table">
            <tr>
                <th>ID</th>
                <th>Username</th>
                <th>Full Name</th>
                <th>Active</th>
                <th>Picture</th>
                <th>Flag</th>
            </tr>
            {% for client in clients %}
            <tr>
                <td>{{ client.id }}</td> <!-- Assuming client's ID is stored in a field called 'id' -->
                <td>{{ client.username }}</td>
                <td>{{ client.full_name }}</td>
                {% if client.is_active[0] == 0 %}
                <td class="access">
                    <form action="{{ url_for('users_bp.deactivate_user', username=client.username) }}" method="post">
                        <input type="hidden" name="user_id" value="{{ client.id }}"> <!-- Hidden input field to store user's ID -->
                        <input type="submit" value="Activated">
                    </form>
                </td>
                {% else %}
                <td class="access deactivated">
                    <form action="{{ url_for('users_bp.reactivate_user', username=client.username) }}" method="post">                        
                        <input type="submit" value="Deactivated">
                    </form>
                </td>
                {% endif %}
                <td><img src="{{ url_for('static', filename='images/user-pics/' + client.user_image) }}" alt="Profile picture of user"></td>
                <td class="flag">
                    <form actopm="{{url_for('users')}}">

                    </form>
                </td>
            </tr>
            {% endfor %}
            
        </table>
    </div>
    <div id="Employees-list" class="content">
        <h3>Employee List</h3>
        <table class="admin-table">
            <tr>
                <th>ID</th>
                <th>Username</th>
                <th>Full Name</th>
                <th>Active</th>
                <th>Picture</th>
                <th class="flag">Flag</th>
            </tr>
            {% for employee in employees %}
            <tr>
                <td>{{employee.user_id}}</td>
                <td>{{employee.username}}</td>
                <td>{{employee.full_name}}</td>    
                {% if employee.is_active[0] == 0 %}
                <td class="access">
                    <form action="{{ url_for('users_bp.deactivate_user', username=employee.username) }}" method="post">
                        <input type="submit" value="Activated">
                    </form>
                </td>
                {% else %}
                <td class="access deactivated">
                    <form action="{{ url_for('users_bp.reactivate_user', username=employee.username) }}" method="post">
                        <input type="submit" value="Deactivated">
                    </form>
                </td>
                {% endif %}
                <td><img src="{{ url_for('static', filename='images/user-pics/' + employee.user_image) }}" alt="Profile picture of user"></td>
                <td>{{employee.status}}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <div id="Appointments-list" class="content">
        <h3>Appointment List With Reports</h3>
        <table class="admin-table">
            <tr>
                <th>ID</th>
                <th>Status</th>
                <th>Date</th>
                <th>Client ID</th>
                <th>Employee ID</th>
            </tr>
            {% for app in appointments %}
            <tr>
                <td>{{app.appointment_id}}</td>
                <td>{{app.status}}</td>
                <td>{{app.client_id}}</td>
                <td>{{app.professional_id}}</td>
                <td></td>
            </tr>
            {% endfor %}
        </table>
    </div>    
</div>
{% endblock content_main_pannel %}
