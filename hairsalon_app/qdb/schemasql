DROP TABLE salon_report;
DROP TABLE salon_appointment;
DROP TABLE salon_service;
DROP TABLE salon_client;
DROP TABLE salon_professional;
DROP TABLE salon_admin;

-- Create table for salon_client
CREATE TABLE salon_client (
    user_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    is_active NUMBER(1) default(0),
    status NUMBER(1) default (0),
    username VARCHAR2(30) NOT NULL UNIQUE,
    full_name VARCHAR2(100) NOT NULL,
    email VARCHAR2(255) NOT NULL,
    user_image VARCHAR2(255) NOT NULL,
    password_hashed VARCHAR2(255) NOT NULL,
    phone_number VARCHAR2(15) NOT NULL,
    address VARCHAR2(255) NOT NULL,
    age NUMBER NOT NULL,
    
    CONSTRAINT client_pk PRIMARY KEY (user_id)
);

---Insert Valuesfor client
INSERT INTO SALON_CLIENT(username, full_name, email, user_image ,password_hashed, phone_number, address, age) 
VALUES("iana_life","Iana Feniuc","ianafeniuc@gmail.com","user.png","sjkdhuvb","514-567-1567","2135 Boul Russeau",19);

-- Create table for salon_professional
CREATE TABLE salon_professional (
    user_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    is_active NUMBER(1) default(0),
    status NUMBER(1) default(0),
    username VARCHAR2(30) NOT NULL UNIQUE,
    full_name VARCHAR2(100) NOT NULL UNIQUE,
    email VARCHAR2(120) NOT NULL,
    user_image VARCHAR2(30),
    password_hashed VARCHAR2(80) NOT NULL,
    phone_number VARCHAR2(80) NOT NULL,
    address VARCHAR2(100) NOT NULL,
    age NUMBER(3) NOT NULL,
    pay_rate DECIMAL(5, 2) NOT NULL,
    specialty VARCHAR2(15) NOT NULL,
    
    CONSTRAINT professional_pk PRIMARY KEY (user_id)
);

-- Create table for salon_admin
CREATE TABLE salon_admin (
    admin_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    is_active NUMBER(1) default (0),
    status NUMBER(1) default(0),
    username VARCHAR2(30) NOT NULL,
    password_hashed VARCHAR2(80) NOT NULL,
    access_level NUMBER(1) NOT NULL,
    
    CONSTRAINT admin_pk PRIMARY KEY (admin_id)
);

-- Create table for salon_service
CREATE TABLE salon_service (
    service_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    service_name VARCHAR2(35) NOT NULL,
    service_duration NUMBER(2) NOT NULL,
    service_price NUMBER(5, 2) NOT NULL,
    service_materials VARCHAR2(35) NOT NULL,
    
    CONSTRAINT service_pk PRIMARY KEY (service_id)
);

-- Create table for salon_appointment
CREATE TABLE salon_appointment (
    appointment_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    status VARCHAR2(10) default('pending'),
    approved NUMBER(1) default(1),
    date_appointment DATE NOT NULL,
    client_id NUMBER NOT NULL,
    professional_id NUMBER NOT NULL,
    service_id NUMBER NOT NULL,
    
    CONSTRAINT appointment_fk PRIMARY KEY (appointment_id),
    CONSTRAINT appointment_clientfk FOREIGN KEY (client_id) 
        REFERENCES salon_client(user_id),
    CONSTRAINT appointment_professionalfk FOREIGN KEY (professional_id)
        REFERENCES salon_professional(user_id),
    CONSTRAINT appointment_sevicefk FOREIGN KEY (service_id) 
        REFERENCES salon_service(service_id)
);

-- Create table for salon_report
CREATE TABLE salon_report(
    report_id NUMBER GENERATED BY DEFAULT AS IDENTITY,
    appointment_id NUMBER NOT NULL,
    date_report DATE NOT NULL,
    member_type NUMBER(1) NOT NULL,
    title VARCHAR2(50) NOT NULL,
    content VARCHAR2(255) NOT NULL,
    
    CONSTRAINT report_pk PRIMARY KEY (report_id),
    CONSTRAINT report_fk FOREIGN KEY (appointment_id)
        REFERENCES Salon_Appointment(appointment_id)
);

